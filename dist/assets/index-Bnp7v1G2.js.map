{"version":3,"file":"index-Bnp7v1G2.js","sources":["../../src/main.js"],"sourcesContent":["import './style.css'\n\nimport * as d3 from \"https://cdn.jsdelivr.net/npm/d3@7/+esm\";\nimport Papa from \"https://cdn.jsdelivr.net/npm/papaparse@5.5.2/+esm\";\n\nconsole.log(\"Hello World from main.js\");\n\nconst timeOfDay = {\n    'nite': '00:00',\n    'am': '06:00',\n    'mid': '12:00',\n    'pm': '18:00'\n}\n\n// Download and parse CSV data\nPapa.parse('./data/export.csv', {\n    download: true,\n    header: true,\n    complete: function ({data, errors, meta}) {\n        // console.log(data);\n        const tranformedData = data\n            .filter(d => d.Dizziness && d.Dizziness != '') // filter out data points with no value\n            .map(d => ({\n                timepoint: new Date(`${d.Date}T${timeOfDay[d.Period]}Z`),\n                level: d.Dizziness ? (d.Dizziness == '' ? null : Number(d.Dizziness)) : null\n            })  \n        )\n\n        // console.log(tranformedData);\n\n        renderChart(document.querySelector('#app'), tranformedData);\n    }\n})\n\nfunction renderChart(elem, data) {\n    // Declare the chart dimensions and margins.\n    const height = 200;\n    const marginTop = 20;\n    const marginRight = 20;\n    const marginBottom = 30;\n    const marginLeft = 10;\n    const width = window.innerWidth - marginLeft - marginRight;\n\n    // Declare the x (horizontal position) scale.\n    const x = d3.scaleUtc()\n        // .domain([d3.min(data, d => d.timepoint), d3.max(data, d => d.timepoint)])\n        .domain([new Date(2024, 3, 1), d3.max(data, d => d.timepoint)])\n        .range([marginLeft, width - marginRight]);\n\n    // Declare the y (vertical position) scale.\n    const y = d3.scaleLinear()\n        .domain([0, 10])\n        .range([height - marginBottom, marginTop]);\n\n    // Create the SVG container.\n    const svg = d3.create(\"svg\")\n        .attr(\"class\", \"chart\")\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n\n    // Add the x-axis.\n    const xAxis = d3.axisBottom(x)\n        .tickSize(10)\n        .tickPadding(5);\n\n    const gX = svg.append(\"g\")\n        .attr(\"class\", \"x axis\")\n        .attr(\"transform\", `translate(0,${height - marginBottom})`)\n        .call(xAxis);\n\n    // Add the y-axis.\n    // const yAxis = d3.axisLeft(y);\n\n    // const gY = svg.append(\"g\")\n    //     .attr(\"class\", \"y axis\")\n    //     .attr(\"transform\", `translate(${marginLeft},0)`)\n    //     .call(yAxis);\n\n    // plot the data\n\n    const barWidth = x(new Date(1971, 1, 16, 6, 0)) - x(new Date(1971, 1, 16)); // bar width is 6 hours\n\n    const dataSelection = svg.append('g')\n          .attr('fill', 'grey')\n        .selectAll()\n        .data(data)\n        .join(\"rect\")\n          .attr('x', d => x(d.timepoint))\n          .attr('width', barWidth)\n          // .attr('y', d => y(4))\n          // .attr('height', d => y(0) - y(4))\n          .attr('y', d => y(d.level))\n          .attr('height', d => y(0) - y(d.level))\n          .attr('class', d => `l${d.level}`);\n\n    const zoom = d3.zoom()\n        .on('zoom', ({ transform }) => {\n            const newX = transform.rescaleX(x);\n\n            gX.call(xAxis.scale(newX));\n\n            dataSelection\n              .attr('x', d => newX(d.timepoint))\n              .attr('width', barWidth * transform.k)\n        });\n\n    // Append the SVG element.\n    elem.append(svg.call(zoom).node());\n}"],"names":["timeOfDay","Papa","data","errors","meta","tranformedData","d","renderChart","elem","width","x","d3","y","svg","xAxis","gX","barWidth","dataSelection","zoom","transform","newX"],"mappings":"g0BAKA,QAAQ,IAAI,0BAA0B,EAEtC,MAAMA,EAAY,CACd,KAAQ,QACR,GAAM,QACN,IAAO,QACP,GAAM,OACV,EAGAC,EAAK,MAAM,oBAAqB,CAC5B,SAAU,GACV,OAAQ,GACR,SAAU,SAAU,CAAC,KAAAC,EAAM,OAAAC,EAAQ,KAAAC,CAAI,EAAG,CAEtC,MAAMC,EAAiBH,EAClB,OAAOI,GAAKA,EAAE,WAAaA,EAAE,WAAa,EAAE,EAC5C,IAAIA,IAAM,CACP,UAAW,IAAI,KAAK,GAAGA,EAAE,IAAI,IAAIN,EAAUM,EAAE,MAAM,CAAC,GAAG,EACvD,MAAOA,EAAE,UAAaA,EAAE,WAAa,GAAK,KAAO,OAAOA,EAAE,SAAS,EAAK,IACxF,EACA,EAIQC,EAAY,SAAS,cAAc,MAAM,EAAGF,CAAc,CAClE,CACA,CAAC,EAED,SAASE,EAAYC,EAAMN,EAAM,CAO7B,MAAMO,EAAQ,OAAO,WAAa,GAAa,GAGzCC,EAAIC,EAAG,SAAQ,EAEhB,OAAO,CAAC,IAAI,KAAK,KAAM,EAAG,CAAC,EAAGA,EAAG,IAAIT,EAAMI,GAAKA,EAAE,SAAS,CAAC,CAAC,EAC7D,MAAM,CAAC,GAAYG,EAAQ,EAAW,CAAC,EAGtCG,EAAID,EAAG,YAAW,EACnB,OAAO,CAAC,EAAG,EAAE,CAAC,EACd,MAAM,CAAC,IAAuB,EAAS,CAAC,EAGvCE,EAAMF,EAAG,OAAO,KAAK,EACtB,KAAK,QAAS,OAAO,EACrB,KAAK,QAASF,CAAK,EACnB,KAAK,SAAU,GAAM,EAGpBK,EAAQH,EAAG,WAAWD,CAAC,EACxB,SAAS,EAAE,EACX,YAAY,CAAC,EAEZK,EAAKF,EAAI,OAAO,GAAG,EACpB,KAAK,QAAS,QAAQ,EACtB,KAAK,YAAa,kBAAuC,EACzD,KAAKC,CAAK,EAYTE,EAAWN,EAAE,IAAI,KAAK,KAAM,EAAG,GAAI,EAAG,CAAC,CAAC,EAAIA,EAAE,IAAI,KAAK,KAAM,EAAG,EAAE,CAAC,EAEnEO,EAAgBJ,EAAI,OAAO,GAAG,EAC7B,KAAK,OAAQ,MAAM,EACrB,UAAS,EACT,KAAKX,CAAI,EACT,KAAK,MAAM,EACT,KAAK,IAAKI,GAAKI,EAAEJ,EAAE,SAAS,CAAC,EAC7B,KAAK,QAASU,CAAQ,EAGtB,KAAK,IAAKV,GAAKM,EAAEN,EAAE,KAAK,CAAC,EACzB,KAAK,SAAUA,GAAKM,EAAE,CAAC,EAAIA,EAAEN,EAAE,KAAK,CAAC,EACrC,KAAK,QAASA,GAAK,IAAIA,EAAE,KAAK,EAAE,EAEjCY,EAAOP,EAAG,KAAI,EACf,GAAG,OAAQ,CAAC,CAAE,UAAAQ,KAAgB,CAC3B,MAAMC,EAAOD,EAAU,SAAST,CAAC,EAEjCK,EAAG,KAAKD,EAAM,MAAMM,CAAI,CAAC,EAEzBH,EACG,KAAK,IAAKX,GAAKc,EAAKd,EAAE,SAAS,CAAC,EAChC,KAAK,QAASU,EAAWG,EAAU,CAAC,CACnD,CAAS,EAGLX,EAAK,OAAOK,EAAI,KAAKK,CAAI,EAAE,MAAM,CACrC"}