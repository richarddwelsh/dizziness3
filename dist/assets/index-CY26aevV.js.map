{"version":3,"file":"index-CY26aevV.js","sources":["../../src/main.js"],"sourcesContent":["import './style.css'\r\n\r\nimport * as d3 from \"https://cdn.jsdelivr.net/npm/d3@7/+esm\";\r\nimport Papa from \"https://cdn.jsdelivr.net/npm/papaparse@5.5.2/+esm\";\r\n\r\nconsole.log(\"Hello World\");\r\n\r\nconst timeOfDay = {\r\n    'nite': '00:00',\r\n    'am': '06:00',\r\n    'mid': '12:00',\r\n    'pm': '18:00'\r\n}\r\n\r\n// Download and parse CSV data\r\nPapa.parse('./data/export.csv', {\r\n    download: true,\r\n    header: true,\r\n    complete: function ({data, errors, meta}) {\r\n        // console.log(data);\r\n        const tranformedData = data\r\n            .filter(d => d.Dizziness && d.Dizziness != '') // filter out data points with no value\r\n            .map(d => ({\r\n                timepoint: new Date(`${d.Date}T${timeOfDay[d.Period]}Z`),\r\n                level: d.Dizziness ? (d.Dizziness == '' ? null : Number(d.Dizziness)) : null\r\n            })  \r\n        )\r\n\r\n        console.log(tranformedData);\r\n\r\n        renderChart(document.querySelector('#app'), tranformedData);\r\n    }\r\n})\r\n\r\nfunction renderChart(elem, data) {\r\n    // Declare the chart dimensions and margins.\r\n    const height = 200;\r\n    const marginTop = 20;\r\n    const marginRight = 20;\r\n    const marginBottom = 30;\r\n    const marginLeft = 10;\r\n    const width = window.innerWidth - marginLeft - marginRight;\r\n\r\n    // Declare the x (horizontal position) scale.\r\n    const x = d3.scaleUtc()\r\n        // .domain([d3.min(data, d => d.timepoint), d3.max(data, d => d.timepoint)])\r\n        .domain([new Date(2024, 3, 1), d3.max(data, d => d.timepoint)])\r\n        .range([marginLeft, width - marginRight]);\r\n\r\n    // Declare the y (vertical position) scale.\r\n    const y = d3.scaleLinear()\r\n        .domain([0, 10])\r\n        .range([height - marginBottom, marginTop]);\r\n\r\n    // Create the SVG container.\r\n    const svg = d3.create(\"svg\")\r\n        .attr(\"class\", \"chart\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height);\r\n\r\n    // Add the x-axis.\r\n    const xAxis = d3.axisBottom(x)\r\n        .tickSize(10)\r\n        .tickPadding(5);\r\n\r\n    const gX = svg.append(\"g\")\r\n        .attr(\"class\", \"x axis\")\r\n        .attr(\"transform\", `translate(0,${height - marginBottom})`)\r\n        .call(xAxis);\r\n\r\n    // Add the y-axis.\r\n    // const yAxis = d3.axisLeft(y);\r\n\r\n    // const gY = svg.append(\"g\")\r\n    //     .attr(\"class\", \"y axis\")\r\n    //     .attr(\"transform\", `translate(${marginLeft},0)`)\r\n    //     .call(yAxis);\r\n\r\n    // plot the data\r\n\r\n    const barWidth = x(new Date(1971, 1, 16, 6, 0)) - x(new Date(1971, 1, 16)); // bar width is 6 hours\r\n\r\n    const dataSelection = svg.append('g')\r\n          .attr('fill', 'grey')\r\n        .selectAll()\r\n        .data(data)\r\n        .join(\"rect\")\r\n          .attr('x', d => x(d.timepoint))\r\n          .attr('width', barWidth)\r\n          // .attr('y', d => y(4))\r\n          // .attr('height', d => y(0) - y(4))\r\n          .attr('y', d => y(d.level))\r\n          .attr('height', d => y(0) - y(d.level))\r\n          .attr('class', d => `l${d.level}`);\r\n\r\n    const zoom = d3.zoom()\r\n        .on('zoom', ({ transform }) => {\r\n            const newX = transform.rescaleX(x);\r\n\r\n            gX.call(xAxis.scale(newX));\r\n\r\n            dataSelection\r\n              .attr('x', d => newX(d.timepoint))\r\n              .attr('width', barWidth * transform.k)\r\n        });\r\n\r\n    // Append the SVG element.\r\n    elem.append(svg.call(zoom).node());\r\n}"],"names":["timeOfDay","Papa","data","errors","meta","tranformedData","d","renderChart","elem","width","x","d3","y","svg","xAxis","gX","barWidth","dataSelection","zoom","transform","newX"],"mappings":"g0BAKA,QAAQ,IAAI,aAAa,EAEzB,MAAMA,EAAY,CACd,KAAQ,QACR,GAAM,QACN,IAAO,QACP,GAAM,OACV,EAGAC,EAAK,MAAM,oBAAqB,CAC5B,SAAU,GACV,OAAQ,GACR,SAAU,SAAU,CAAC,KAAAC,EAAM,OAAAC,EAAQ,KAAAC,CAAI,EAAG,CAEtC,MAAMC,EAAiBH,EAClB,OAAOI,GAAKA,EAAE,WAAaA,EAAE,WAAa,EAAE,EAC5C,IAAIA,IAAM,CACP,UAAW,IAAI,KAAK,GAAGA,EAAE,IAAI,IAAIN,EAAUM,EAAE,MAAM,CAAC,GAAG,EACvD,MAAOA,EAAE,UAAaA,EAAE,WAAa,GAAK,KAAO,OAAOA,EAAE,SAAS,EAAK,IACxF,EACS,EAED,QAAQ,IAAID,CAAc,EAE1BE,EAAY,SAAS,cAAc,MAAM,EAAGF,CAAc,CAC7D,CACL,CAAC,EAED,SAASE,EAAYC,EAAMN,EAAM,CAO7B,MAAMO,EAAQ,OAAO,WAAa,GAAa,GAGzCC,EAAIC,EAAG,SAAU,EAElB,OAAO,CAAC,IAAI,KAAK,KAAM,EAAG,CAAC,EAAGA,EAAG,IAAIT,EAAMI,GAAKA,EAAE,SAAS,CAAC,CAAC,EAC7D,MAAM,CAAC,GAAYG,EAAQ,EAAW,CAAC,EAGtCG,EAAID,EAAG,YAAa,EACrB,OAAO,CAAC,EAAG,EAAE,CAAC,EACd,MAAM,CAAC,IAAuB,EAAS,CAAC,EAGvCE,EAAMF,EAAG,OAAO,KAAK,EACtB,KAAK,QAAS,OAAO,EACrB,KAAK,QAASF,CAAK,EACnB,KAAK,SAAU,GAAM,EAGpBK,EAAQH,EAAG,WAAWD,CAAC,EACxB,SAAS,EAAE,EACX,YAAY,CAAC,EAEZK,EAAKF,EAAI,OAAO,GAAG,EACpB,KAAK,QAAS,QAAQ,EACtB,KAAK,YAAa,kBAAuC,EACzD,KAAKC,CAAK,EAYTE,EAAWN,EAAE,IAAI,KAAK,KAAM,EAAG,GAAI,EAAG,CAAC,CAAC,EAAIA,EAAE,IAAI,KAAK,KAAM,EAAG,EAAE,CAAC,EAEnEO,EAAgBJ,EAAI,OAAO,GAAG,EAC7B,KAAK,OAAQ,MAAM,EACrB,UAAW,EACX,KAAKX,CAAI,EACT,KAAK,MAAM,EACT,KAAK,IAAKI,GAAKI,EAAEJ,EAAE,SAAS,CAAC,EAC7B,KAAK,QAASU,CAAQ,EAGtB,KAAK,IAAKV,GAAKM,EAAEN,EAAE,KAAK,CAAC,EACzB,KAAK,SAAUA,GAAKM,EAAE,CAAC,EAAIA,EAAEN,EAAE,KAAK,CAAC,EACrC,KAAK,QAASA,GAAK,IAAIA,EAAE,KAAK,EAAE,EAEjCY,EAAOP,EAAG,KAAM,EACjB,GAAG,OAAQ,CAAC,CAAE,UAAAQ,KAAgB,CAC3B,MAAMC,EAAOD,EAAU,SAAST,CAAC,EAEjCK,EAAG,KAAKD,EAAM,MAAMM,CAAI,CAAC,EAEzBH,EACG,KAAK,IAAKX,GAAKc,EAAKd,EAAE,SAAS,CAAC,EAChC,KAAK,QAASU,EAAWG,EAAU,CAAC,CACnD,CAAS,EAGLX,EAAK,OAAOK,EAAI,KAAKK,CAAI,EAAE,KAAI,CAAE,CACrC"}